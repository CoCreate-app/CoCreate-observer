!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.CoCreate=e():(t.CoCreate=t.CoCreate||{},t.CoCreate.observer=e())}(this,(function(){return(()=>{"use strict";var t={};return(()=>{var e=t;function a(t){this.callbackMap=new Map,this.callbackMap.set("ALL",{attributes:[],addedNodes:[],removedNodes:[],characterData:[],childList:[]});let[e,a]=this.runCallbackGen("attributes");this.runCallbackAtt=e,this.runCallbackAttAll=a,[e,a]=this.runCallbackGen("characterData"),this.runCallbackChar=e,this.runCallbackCharAll=a,this.runCallbackAdd=this.runCallbackExGen("addedNodes","addedNodes"),this.runCallbackRemove=this.runCallbackExGen("removedNodes","removedNodes");new MutationObserver((t=>this._callback.call(this,t))).observe(t,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0})}e.default=void 0,window.counter=0;const i=["addedNodes","removedNodes","attributes","characterData","childList"];a.prototype.init=function({observe:t=["addedNodes","attributes"],attributeFilter:e,callback:a}){if(!t||!t.every((t=>i.includes(t))))throw"please enter a valid observe";if(this.observe=t,this.callback=a,e&&e.length)for(let t of e)this._register(t.toLowerCase());else this._register("ALL")},a.prototype._register=function(t){for(let e of this.observe)"childList"!==e?this.callbackMap.has(t)?this.callbackMap.get(t)[e]?this.callbackMap.get(t)[e].push(this.callback):this.callbackMap.get(t)[e]=[this.callback]:this.callbackMap.set(t,{[e]:[this.callback]}):this.callbackMap.get("ALL").childList&&this.callbackMap.get("ALL").childList.push(this.callback)},a.prototype.uninit=function(t){for(let[e,a]of this.callbackMap.entries())a.attributes&&(a.attributes=a.attributes.filter((e=>e!==t))),a.characterData&&(a.characterData=a.characterData.filter((e=>e!==t))),a.addedNodes&&(a.addedNodes=a.addedNodes.filter((e=>e!==t))),a.removedNodes&&(a.removedNodes=a.removedNodes.filter((e=>e!==t))),a.childList&&(a.childList=a.childList.filter((e=>e!==t))),this.callbackMap.set(e,{attributes:a.attributes,characterData:a.characterData,addedNodes:a.addedNodes,removedNodes:a.removedNodes,childList:a.childList})},a.prototype._callback=function(t){for(let e of t)switch(window.counter++,e.type){case"attributes":this._attributeCallback(e);break;case"characterData":this._characterDataCallback(e);break;case"childList":this._childListCallback(e)}},a.prototype.runCallbackGen=function(t){return[function(e,a){let i=this.callbackMap.get(a);if(i&&i[t])for(let a of i[t])a(e)},function(e){for(let a of this.callbackMap.get("ALL")[t])a(e)}]},a.prototype._attributeCallback=function(t){if(!t.target.hasAttributes(t.attributeName))return;t.target.getAttribute(t.attributeName)!==t.oldValue&&(this.runCallbackAtt(t,t.attributeName),this.runCallbackAttAll(t))},a.prototype._characterDataCallback=function(t){if(t.target.data===t.oldValue)return;this.runCallbackCharAll(t);let e=t.target.parentElement;for(let a of e.attributes)this.runCallbackChar(t,a.name)},a.prototype.runCallbackExGen=function(t,e){return function a(i){for(let l of i[e]){if(l.tagName)for(let e of l.attributes){let a=this.callbackMap.get(e.name);if(a&&a[t])for(let e of a[t])e({type:i.type,target:l,[t]:!0})}l.children&&a.call(this,{[e]:l.children})}for(let a of this.callbackMap.get("ALL")[t])for(let l of i[e])l.tagName&&a({type:i.type,target:l,[t]:!0})}},a.prototype._childList=function(t){this.callbackMap.get("ALL").childList.forEach((e=>{e(t)}))},a.prototype._childListCallback=function(t){this._childList(t),this.runCallbackAdd(t),this.runCallbackRemove(t)},a.prototype.setInitialized=function(t,e){t["co_initialized_"+(e=e||"")]=!0},a.prototype.getInitialized=function(t,e){return!!t["co_initialized_"+(e=e||"")]};var l=new a(document.body);e.default=l})(),t=t.default})()}));