!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.CoCreate=e():(t.CoCreate=t.CoCreate||{},t.CoCreate.observer=e())}(this,(function(){return(()=>{"use strict";var t={727:(t,e,r)=>{function a(t,e,r){if(e){if(t.classList.contains(e))return t;let r=t.parentNode;for(;null!=r&&r.classList;){if(r.classList.contains(e))return r;r=r.parentNode}}else if(r){if(r.every((e=>t.attributes.hasOwnProperty(e))))return t;let e=t.parentNode;for(;null!=e&&e.attributes;){if(r.every((t=>e.attributes.hasOwnProperty(t))))return e;e=e.parentNode}}return!1}function o(t){try{let e=JSON.parse(t);return"object"==typeof e&&null!=e}catch(t){return!1}}function n(t){return t.getAttributeNames().reduce(((e,r)=>(e[r]=t.getAttribute(r),e)),{})}function i(t){return!!t&&!/{{\s*([\w\W]+)\s*}}/g.test(t)}function l(t,e){try{if(void 0===t)return!1;let r=e.split("."),a=r.shift();return r.length>0?this.__getValueFromJonDeep(t[a],r.join(".")):t[a]}catch(t){return!1}}function c(t){let e=[{document,window}];for(let t of document.querySelectorAll("iframe")){let r=t.contentDocument||t.contentWindow.document,a=t.contentWindow;e.push({document:r,window:a,frameElement:t})}let r=new Set;for(let a of e){let e=t(a);e&&"function"==typeof e[Symbol.iterator]?e.forEach((t=>r.add(t))):e&&r.add(e)}return Array.from(r)}function s(t){let e=[];do{if(!t||!t.tagName)return!1;let r=t.tagName.toLowerCase();if(t.id&&"BODY"!==t.tagName&&(r+="#"+t.id),t.classList.length&&"BODY"!==t.tagName&&t.classList.forEach((t=>{-1===t.indexOf(":")&&(r+="."+t)})),"BODY"!==t.tagName&&t.parentNode){let e=Array.prototype.indexOf.call(t.parentNode.children,t);r+=`:nth-child(${e+1})`}e.unshift(r),t=t.parentNode}while("HTML"!==t.tagName);return e.join(" > ")}function u(){let t=window;for(;t!==window.parent;)t=window.parent;return t}function d(t,e){let r;return c((t=>{t.document.contains(e)&&(r=t.frameElement)})),r}function f(t){let e=u;return t.forEach((t=>{e&&(e=e.querySelector(t))})),e}function*h(t,e){for(let r of t)r.selector&&e.matches(r.selector)&&(yield r)}function b(t,e,r,a){for(let o of h(a||window.elementConfig,t)){if(!0===o[e])return r(t,o);if(!1===o[e])return!1;if(void 0===o[e])continue;if(y(o[e]))return r(t,o,!0)}return!1}function p(t){let e=(new DOMParser).parseFromString(t,"text/html");return e.head.children[0]?e.head.children[0]:e.body.children[0]}function m(t,e){return t.split(e).map((t=>t.trim()))}function g(t,e){return t.map((t=>t.trim())).join(e)}function y(t){try{document.createDocumentFragment().querySelector(t)}catch(t){return!1}return!0}function k(t,e){let r=[],a=(window,d(0,t)),o=s(a);return o&&r.unshift(o),e?{path:r,document:a||document}:r}function w(t="all"){if(!["all","error","warn","log","off"].includes(t))throw new Error("level must be one of all, error, warn, log or off");return{error:function(e){["all","error"].includes(t)},warn:function(e){["all","error","warn"].includes(t)},log:function(){["all","error","warn","log"].includes(t)}}}async function L(t){if("loading"===t.contentDocument.readyState)try{await new Promise(((e,r)=>{t.contentWindow.addEventListener("load",(t=>e()))}))}catch(t){}}function C(t,e){let r=e.split(";"),a=t;for(let t=0;t<r.length-1;t++)if(a=a.querySelector(r[t]),!a)return[];return[this,[r.length-1]]}function N(t){let[e,r]=C(this,t);return e?e.contentWindow.document.querySelector(r):null}function v(t){let[e,r]=C(this,t);return e?e.contentWindow.document.querySelectorAll(r):[]}r.r(e),r.d(e,{getParentFromElement:()=>a,isJsonString:()=>o,getAttributes:()=>n,checkAttrValue:()=>i,getValueFromJonDeep:()=>l,allFrame:()=>c,cssPath:()=>s,getTopMostWindow:()=>u,findIframeFromElement:()=>d,getIframeFromPath:()=>f,configMatch:()=>h,configExecuter:()=>b,parseTextToHtml:()=>p,splitBydelimiter:()=>m,joinBydelimiter:()=>g,isValidSelector:()=>y,getElementPath:()=>k,logger:()=>w,waitForLoad:()=>L,getComplexSelector:()=>C,frameQuerySelector:()=>N,frameQuerySelectorAll:()=>v,default:()=>A});const A={getElementPath:k,isValidSelector:y,joinBydelimiter:g,splitBydelimiter:m,parseTextToHtml:p,configExecuter:b,configMatch:h,getIframeFromPath:f,findIframeFromElement:d,getTopMostWindow:u,cssPath:s,allFrame:c,checkAttrValue:i,getAttributes:n,isJsonString:o,getParentFromElement:a,logger:w}}},e={};function r(a){var o=e[a];if(void 0!==o)return o.exports;var n=e[a]={exports:{}};return t[a](n,n.exports,r),n.exports}r.d=(t,e)=>{for(var a in e)r.o(e,a)&&!r.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var a={};return(()=>{var t=a;t.default=void 0;(0,r(727).logger)("off");function e(t){this.callbackMap=new Map,this.callbackMap.set("ALL",{attributes:[],addedNodes:[],removedNodes:[],characterData:[],childList:[]});let[e,r]=this.runCallbackGen("attributes");this.runCallbackAtt=e,this.runCallbackAttAll=r,[e,r]=this.runCallbackGen("characterData"),this.runCallbackChar=e,this.runCallbackCharAll=r,this.runCallbackAdd=this.runCallbackExGen("addedNodes","addedNodes"),this.runCallbackRemove=this.runCallbackExGen("removedNodes","removedNodes");new MutationObserver((t=>this._callback.call(this,t))).observe(t,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0})}window.counter=0;const o=["addedNodes","removedNodes","attributes","characterData","childList"];e.prototype.init=function({observe:t=["addedNodes","attributes"],attributeFilter:e,callback:r}){if(!t||!t.every((t=>o.includes(t))))throw"please enter a valid observe";if(this.observe=t,this.callback=r,e&&e.length)for(let t of e)this._register(t.toLowerCase());else this._register("ALL")},e.prototype._register=function(t){for(let e of this.observe)"childList"!==e?this.callbackMap.has(t)?this.callbackMap.get(t)[e]?this.callbackMap.get(t)[e].push(this.callback):this.callbackMap.get(t)[e]=[this.callback]:this.callbackMap.set(t,{[e]:[this.callback]}):this.callbackMap.get("ALL").childList&&this.callbackMap.get("ALL").childList.push(this.callback)},e.prototype.uninit=function(t){for(let[e,r]of this.callbackMap.entries())r.attributes&&(r.attributes=r.attributes.filter((e=>e!==t))),r.characterData&&(r.characterData=r.characterData.filter((e=>e!==t))),r.addedNodes&&(r.addedNodes=r.addedNodes.filter((e=>e!==t))),r.removedNodes&&(r.removedNodes=r.removedNodes.filter((e=>e!==t))),r.childList&&(r.childList=r.childList.filter((e=>e!==t))),this.callbackMap.set(e,{attributes:r.attributes,characterData:r.characterData,addedNodes:r.addedNodes,removedNodes:r.removedNodes,childList:r.childList})},e.prototype._callback=function(t){for(let e of t)switch(window.counter++,e.type){case"attributes":this._attributeCallback(e);break;case"characterData":this._characterDataCallback(e);break;case"childList":this._childListCallback(e)}},e.prototype.runCallbackGen=function(t){return[function(e,r){let a=this.callbackMap.get(r);if(a&&a[t])for(let r of a[t])r(e)},function(e){for(let r of this.callbackMap.get("ALL")[t])r(e)}]},e.prototype._attributeCallback=function(t){if(!t.target.hasAttributes(t.attributeName))return;t.target.getAttribute(t.attributeName)!==t.oldValue&&(this.runCallbackAtt(t,t.attributeName),this.runCallbackAttAll(t))},e.prototype._characterDataCallback=function(t){if(t.target.data===t.oldValue)return;this.runCallbackCharAll(t);let e=t.target.parentElement;for(let r of e.attributes)this.runCallbackChar(t,r.name)},e.prototype.runCallbackExGen=function(t,e){return function r(a){for(let o of a[e]){if(o.tagName)for(let e of o.attributes){let r=this.callbackMap.get(e.name);if(r&&r[t])for(let e of r[t])e({type:a.type,target:o,[t]:!0})}o.children&&r.call(this,{[e]:o.children})}for(let r of this.callbackMap.get("ALL")[t])for(let o of a[e])o.tagName&&r({type:a.type,target:o,[t]:!0})}},e.prototype._childList=function(t){this.callbackMap.get("ALL").childList.forEach((e=>{e(t)}))},e.prototype._childListCallback=function(t){this._childList(t),this.runCallbackAdd(t),this.runCallbackRemove(t)},e.prototype.setInitialized=function(t,e){t["co_initialized_"+(e=e||"")]=!0},e.prototype.getInitialized=function(t,e){return!!t["co_initialized_"+(e=e||"")]};var n=new e(document.body);t.default=n})(),a=a.default})()}));