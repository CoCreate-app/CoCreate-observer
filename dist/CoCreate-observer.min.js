!function(t,a){"object"==typeof exports&&"object"==typeof module?module.exports=a():"function"==typeof define&&define.amd?define([],a):"object"==typeof exports?exports.CoCreate=a():(t.CoCreate=t.CoCreate||{},t.CoCreate.observer=a())}(this,(function(){return(()=>{"use strict";var t={};return(()=>{var a=t;function e(t){this.callbackMap=new Map,this.callbackMap.set("ALL",{attributes:[],addedNodes:[],removedNodes:[],characterData:[]});let[a,e]=this.runCallbackGen("attributes");this.runCallbackAtt=a,this.runCallbackAttAll=e,[a,e]=this.runCallbackGen("characterData"),this.runCallbackChar=a,this.runCallbackCharAll=e,this.runCallbackAdd=this.runCallbackExGen("addedNodes","addedNodes"),this.runCallbackRemove=this.runCallbackExGen("removedNodes","removedNodes");new MutationObserver((t=>this._callback.call(this,t))).observe(t,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0})}a.default=void 0,window.counter=0,e.prototype.runCallbackGen=function(t){return[function(a,e){let l=this.callbackMap.get(e);if(l&&l[t])for(let e of l[t])e(a)},function(a){for(let e of this.callbackMap.get("ALL")[t])e(a)}]},e.prototype.runCallbackExGen=function(t,a){return function(e){for(let l of e[a])for(let a of l.attributes||l.parentElement.attributes){let r=this.callbackMap.get(a.name);if(r&&r[t])for(let a of r[t])a({type:e.type,target:l,[t]:!0})}for(let l of this.callbackMap.get("ALL")[t])for(let r of e[a])l({type:e.type,target:r,[t]:!0})}},e.prototype.init=function({observe:t=["addedNodes","attributes","characterData"],attributesFilter:a,callback:e}){if(this.observe=t,this.callback=e,a&&a.length)for(let t of a)this._register(t.toLowerCase());else this._register("ALL")},e.prototype._register=function(t){for(let a of this.observe)this.callbackMap.has(t)?this.callbackMap.get(t)[a]?this.callbackMap.get(t)[a].push(this.callback):this.callbackMap.get(t)[a]=[this.callback]:this.callbackMap.set(t,{[a]:[this.callback]})},e.prototype.uninit=function({callback:t}){},e.prototype._callback=function(t){for(let a of t)switch(window.counter++,a.type){case"attributes":this._attributeCallback(a);break;case"characterData":this._characterDataCallback(a);break;case"childList":this._childListCallback(a)}},e.prototype._attributeCallback=function(t){if(!t.target.hasAttributes(t.attributeName))return;t.target.getAttribute(t.attributeName)!==t.oldValue&&(this.runCallbackAtt(t,t.attributeName),this.runCallbackAttAll(t))},e.prototype._characterDataCallback=function(t){if(t.target.data===t.oldValue)return;this.runCallbackCharAll(t);let a=t.target.parentElement;for(let e of a.attributes)this.runCallbackChar(t,e.name)},e.prototype._childListCallback=function(t){this.runCallbackAdd(t),this.runCallbackRemove(t)};var l=new e(document.body);a.default=l})(),t=t.default})()}));